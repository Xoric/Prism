package xoric.prism.creator.custom.control;

import xoric.prism.creator.common.view.INewDialogResult;
import xoric.prism.creator.custom.model.SpriteCollectionModel;
import xoric.prism.creator.custom.view.ISpriteCollectionView;
import xoric.prism.data.types.IPath_r;

public class MainControl implements IMainControl
{
	private SpriteCollectionModel model;
	private ISpriteCollectionView view;

	public MainControl(ISpriteCollectionView view)
	{
		this.view = view;
	}

	/* -------------- IMainMenuListener ------------ */

	@Override
	public void requestCreateNewObject(INewDialogResult result)
	{
		model = CollectionControl.createNewModel(result);

		if (model != null)
		{
			view.setModel(model);
			view.displayAll();
		}
	}

	@Override
	public void requestOpenObject(IPath_r path)
	{
		model = CollectionControl.openModel(path);

		if (model != null)
		{
			view.setModel(model);
			view.displayAll();
		}
	}

	@Override
	public void requestCloseObject()
	{
		// TODO Auto-generated method stub

	}

	@Override
	public void requestExit()
	{
		System.exit(0);
	}

	/* -------------- IObjectControl ------------ */

	@Override
	public void requestAddObject()
	{
		if (model != null)
		{
			ObjectControl.addObject(model);

			view.displayObjects();
		}
	}

	@Override
	public void requestDeleteObject(int index)
	{
		if (model != null)
		{
			ObjectControl.deleteObject(model, index);

			view.displayObjects();
		}
	}

	/* -------------- IRectControl ------------ */

	@Override
	public void requestSaveCollection()
	{
		if (model != null)
			CollectionControl.saveModel(model);
	}
}

package xoric.prism.creator.bootstrap;

import javax.swing.UIManager;

import xoric.prism.creator.drawer.PrismDrawer;
import xoric.prism.data.PrismDataLoader;
import xoric.prism.data.exceptions.PrismException;
import xoric.prism.data.global.IPrismGlobal;
import xoric.prism.data.modules.ErrorCode;
import xoric.prism.data.modules.ModuleID;
import xoric.prism.data.types.Path;
import xoric.prism.global.PrismGlobal;
import xoric.prism.scene.IScene;
import xoric.prism.scene.lwjgl.PrismSceneLWJGL;

public class PrismCreatorBootstrap
{
	private static IScene scene;
	private static PrismDrawer drawer;

	private static void setLookAndFeel()
	{
		try
		{
			UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
		}
		catch (Exception e)
		{
		}
	}

	private static void loadAll() throws PrismException
	{
		PrismDataLoader.loadAll();
	}

	public static void main(String[] args)
	{
		// set look and feel
		setLookAndFeel();

		// register module and set data path
		ErrorCode.moduleID = ModuleID.CREATOR;


		try
		{
			// create global
			PrismGlobal global = new PrismGlobal();
			global.load();
			IPrismGlobal.instance = global;

			// initialize
			loadAll();

			// create scene and client
			scene = new PrismSceneLWJGL();
			drawer = new PrismDrawer(scene);

			// start creator
			drawer.start();
		}
		catch (PrismException e)
		{
			e.printStackTrace();
			e.showErrorMessage();
		}
		catch (Exception e)
		{
			e.printStackTrace();
		}
	}
}

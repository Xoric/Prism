package xoric.prism.server.main;

import xoric.prism.data.time.PrismClock;

public class ServerLoop extends Thread
{
	private static ServerLoop instance;

	private volatile boolean isStopRequested;

	private ServerLoop()
	{
	}

	public static void startLoop(ServerModel model)
	{
		if (instance != null)
			instance.requestStop();
	}

	public void run(ServerModel model)
	{
		isStopRequested = false;
		PrismClock clock = new PrismClock();

		System.out.println("starting server loop");

		boolean resume = true;
		do
		{
			//			int startMs = clock.getTimeMs();

			model.net.update();

		}
		while (!isStopRequested);

		System.out.println("server loop stopped");
	}

	public void requestStop()
	{
		isStopRequested = true;
	}
}

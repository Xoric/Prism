package xoric.prism.world.loader;

import xoric.prism.data.exceptions2.PrismException2;
import xoric.prism.data.global.FileIndex;
import xoric.prism.data.global.Prism;
import xoric.prism.data.meta.MetaBlock;
import xoric.prism.data.meta.MetaFile;
import xoric.prism.data.meta.MetaList;
import xoric.prism.data.meta.MetaType;
import xoric.prism.world.entities.AnimationIndex;

public abstract class PrismWorldLoader
{
	public static void loadAll(boolean loadAnimationDescriptions) throws PrismException2
	{
		if (loadAnimationDescriptions)
			loadAnimationDescriptions();
	}

	private static void loadAnimationDescriptions() throws PrismException2
	{
		MetaFile f = Prism.global.loadMetaFile(FileIndex.ANIM_D);
		MetaList metaList = f.getMetaList();
		MetaBlock metaBlock = metaList.findMetaBlock(MetaType.ANIM_D);

		boolean isOK = AnimationIndex.loadDescriptions(metaBlock);
		if (!isOK)
		{
			ErrorCode c = new ErrorCode(ActorID.LOADER, ErrorID.CORRUPT_META_BLOCK);
			PrismMetaFileException e = new PrismMetaFileException(c, f.getMetaFilename());
			e.appendInfo("block", MetaType.ANIM_D.toString());
			throw e;
		}
	}
}

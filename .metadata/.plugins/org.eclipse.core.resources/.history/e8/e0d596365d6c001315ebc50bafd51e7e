package xoric.prism.compression;

import java.io.ByteArrayOutputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.util.zip.GZIPOutputStream;

public class BufferCompressor
{
	public byte[] compressBuffer(byte[] data)
	{
		int originalSize = (int) file.length();
		byte[] buf = new byte[originalSize];
		FileInputStream in = new FileInputStream(file);
		in.read(buf);
		in.close();

		ByteArrayOutputStream o = new ByteArrayOutputStream();
		GZIPOutputStream out = new GZIPOutputStream(o);
		out.write(buf);
		out.close();
	}

	public static int calcCompressedSize(File file) throws IOException
	{
		int originalSize = (int) file.length();
		byte[] buf = new byte[originalSize];
		FileInputStream in = new FileInputStream(file);
		in.read(buf);
		in.close();

		ByteArrayOutputStream o = new ByteArrayOutputStream();
		GZIPOutputStream out = new GZIPOutputStream(o);
		out.write(buf);
		out.close();

		int packedSize = o.size();

		return packedSize;
	}

	public static double calcCompressionRate(File file) throws Exception
	{
		int originalSize = (int) file.length();
		int packedSize = calcCompressedSize(file);

		double d = packedSize;
		d /= originalSize;

		return d;
	}
}

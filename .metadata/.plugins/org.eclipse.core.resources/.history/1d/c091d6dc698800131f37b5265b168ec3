package xoric.prism.creator.custom.creators;

import java.awt.image.BufferedImage;
import java.util.List;

import xoric.prism.data.types.IPoint_r;
import xoric.prism.data.types.Point;

import com.ryanm.droid.rugl.util.RectanglePacker;

class OptimizerThread extends Thread
{
	private static final long serialVersionUID = 1L;

	private final List<ObjectImages> objects;
	private final IPoint_r originalSize;
	private IPoint_r actualSize;

	public OptimizerThread(List<ObjectImages> objects, IPoint_r size)
	{
		this.objects = objects;
		this.originalSize = new Point(size);
	}

	@Override
	public void run()
	{
		RectanglePacker<BufferedImage> p = new RectanglePacker<BufferedImage>(originalSize.getX(), originalSize.getY(), 0);

		for (ObjectImages o : objects)
			for (BufferedImage bi : o.getImages())
				p.insert(bi.getWidth(), bi.getHeight(), bi);

		boolean b = true;

		for (ObjectImages o : objects)
		{
			for (BufferedImage bi : o.getImages())
			{
				Rect r = p.findRectangle(bi);

				if (r != null)
				{

				}
				else
					return;
			}
		}
		actualSize = new Point();
	}
}
